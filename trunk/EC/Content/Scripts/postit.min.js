var postit=function(){function nt(n){var t=n.find("img[data-rule=loader]"),i;t.show();i={idPostit:n.data().args};$.ajax({type:"POST",url:"/mural/getpostititemlist.ashx",dataType:"json",data:i,cache:!1,success:function(i){if(i.status==g.JSONSTATUS_SUCCESS){if(i.response!=null)if(g.isArray(i.response)){var r=i.response.length;$.each(i.response,function(t,i){e(n,i);t==r-1&&s()})}else e(n,i.response),s()}else i.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError();t.hide()}})}function s(){tags.load({target:".postit-tag-filters",filter:function(n){var t='.postit-item-virtual, #postit-list .postit-item:has(.postit-itemlist[data-tags*="'+n.title+'"])';$("#postit-list").isotope({filter:t,animationEngine:"jquery"})}})}function e(t,r,u){var f='<div class="postit-itemlist" data-args="'+r.idPostitItem+'" data-tags="'+(r.deTag==undefined?"":r.deTag)+'">',s=k({html:r.deItem}),o=Encoder.htmlDecode(s),e,h;i!=r.idUsuario?(f+='<div class="postit-itemlist-content-share">',f+='<img class="postit-itemlist-photo foto medium" src="http://servicos.uniceub.br/api/coorporativo/foto/?idUsuario='+r.idUsuario+'&idOperacao=1" alt="'+r.nmPessoa+'" />',f+='<div class="postit-itemlist-name">'+g.validateName(r.nmPessoa)+"<\/div>",f+=g.isYoutTubeUrl(s)?'<div class="postit-itemlist-desc" style="text-align:center">'+o+"<\/div>":'<div class="postit-itemlist-desc">'+o+"<\/div>",f+='<div class="postit-itemlist-date">Há '+r.dtCriacao+"<\/div>",f+="<\/div>"):(f+='<div class="postit-itemlist-content">',f+='<div class="postit-itemlist-desc">',r.idArquivo>0?(f+='<div class="file">',$.trim(r.nmArquivo)!=$.trim(s)&&(f+=Encoder.htmlDecode(r.nmArquivo)+"<br />"),f+=o,f+='<img src="'+n+"icon"+r.deExtensaoPadrao+'.gif" alt="Arquivo" />',f+="<\/div>"):f+=o,f+="<\/div>",f+='<div class="postit-itemlist-content-date">Há '+r.dtCriacao+"<\/div>",f+="<\/div>");i==r.idUsuario&&(f+='<div class="delete-item"><\/div>');f+="<\/div>";e=$(f);u!=undefined&&u?(h=t.find("div[data-rule=item-list] div.postit-itemlist:eq(0)"),h.length?e.insertBefore(h):t.find("div[data-rule=item-list]").append(e)):t.find("div[data-rule=item-list]").append(e);tags.reLoad();tt(e)}function tt(u){u.bind("mouseover",function(){$(this).addClass("");$(this).removeClass("")}).bind("mouseout",function(){$(this).addClass("");$(this).removeClass("")}).bind("click",function(t){var f,r,e;t.preventDefault();f='<div class="postit-modal-content">';f+='<center><img data-rule="postit-modal-content-loader" src="'+n+'loading.gif" class="loader" alt="Carregando..." /><\/center>';f+='<div class="postit-modal-content-user dn"><\/div>';f+='<div class="postit-modal-content-name dn"><\/div>';f+='<div class="postit-modal-content-desc"><\/div>';f+='<div class="postit-modal-content-date"><\/div>';f+="<\/div>";r=$(f);modal.show({width:"674px",caption:"Descrição do item",content:r,cancelButtonClick:function(){modal.hide()}});e={idPostitItem:u.data().args};$.ajax({type:"POST",url:"/mural/getpostititem.ashx",dataType:"json",data:e,cache:!1,success:function(t){var y=r.find("img[data-rule=postit-modal-content-loader]"),u,f,v,h,o;if(t.status==g.JSONSTATUS_SUCCESS){if(t.response!=null){if(u=t.response,u.idUsuario!=i&&(r.find(".postit-modal-content-user").append('<img src="http://servicos.uniceub.br/api/coorporativo/foto/?idUsuario='+u.idUsuario+'&idOperacao=1" class="foto large" alt="'+g.validateName(u.nmPessoa)+'" />'),r.find(".postit-modal-content-user").show(),r.find(".postit-modal-content-name").html(g.validateName(u.nmPessoa)),r.find(".postit-modal-content-name").show(),r.find(".postit-modal-content-desc").css("margin-left","60px"),r.find(".postit-modal-content-date").css("margin-left","60px")),f=k({html:u.deItem,videoOptions:{autoplay:!0,dataHide:!1,videoWidth:640,videoHeight:360}}),u.idArquivo>0){var c=a.test(u.deExtensaoPadrao.replace(".","")),e=u.nuArquivoWidth,s=u.nuArquivoHeight,l="";e>600&&(origwidth=parseFloat(e),origheight=parseFloat(s),v=origwidth/origheight,newwidth=origwidth,newheight=600/v,roundto=parseInt(10),newheight=roundto>0?newheight.toFixed(roundto):Math.round(newheight),e=600,s=newheight);c&&(f+='<center><img width="'+e+'px" height="'+s+'px" src="'+u.edUrlDownload+'" alt="'+u.nmArquivo+'" /><\/center>',l=' style="left:0px;"');f+='<div class="file">';c||(f+='<img src="'+n+"icon"+u.deExtensaoPadrao+'.gif" alt="'+u.deTipoArquivo+'" />');f+='<a href="'+u.edUrlDownload+'" target="_blank"'+l+">Baixar arquivo<\/a>";f+="<\/div>"}f+="<br />";f+='<div style="font-size:90%;color:#ccc;" class="postititem-tags">Tags: ';f+=u.deTag;(u.deTag==undefined||u.deTag==null||u.deTag.length==0)&&(f+="Não há tag para este postit.");f+="<\/div>";h=$("<div>"+f.replace("\n","<br /><br />")+"<\/div>");o=h.find("iframe[data-rule=youtube]");o.length>0&&(o.attr("width","640px"),o.attr("height","460px"));r.find(".postit-modal-content-desc").html(h);r.find(".postit-modal-content-date").html("<label>Há "+u.dtCriacao+'<\/label> <label class="bullet">·<\/label> ')}}else t.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError();y.hide()}})});var f;u.find(".delete-item").bind("mouseover",function(){$(this).addClass("delete-item-on");$(this).removeClass("delete-item")}).bind("mouseout",function(){$(this).addClass("delete-item");$(this).removeClass("delete-item-on")}).bind("click",function(n){var i,e,o;n.preventDefault();i=$(this).parent();i.unbind("click");e=u.find(".postit-itemlist-desc").html();o="<div>Tem certeza que deseja excluir o item abaixo?<br /><br />"+e+"<\/div>";modal.show({width:"500px",caption:"Confirmação de Exclusão",content:o,confirmButtonText:"Confirmo",confirmButtonClick:function(){var n={idPostitItem:u.data().args};r();$.ajax({type:"POST",url:"/mural/deletepostititem.ashx",dataType:"json",data:n,cache:!1,success:function(n){n.status==g.JSONSTATUS_SUCCESS?(u.remove(),tags.reLoad(),t(),modal.hide()):n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()},error:function(){g.showError()}})},cancelButtonClick:function(){t();modal.hide();i.bind("click",f)}})})}function r(){modal.getConfirmButton().attr("disabled","disabled")}function t(){modal.getConfirmButton().removeAttr("disabled")}function it(n,t){var i=$(".postit-item[index="+n+"]");i.attr("data-args",t.idPostit);p(i,t);nt(i)}function rt(s,c){var p=s.find(".postit-item-action img[data-rule=additem]"),nt,v;if(u(p),p.bind("click",function(){var i='<div class="postit-modal-content">',u;i+='<label>Você pode compartilhar um texto, link de site, um vídeo do <a target="_blank" href="http://www.youtube.com.br">Youtube<\/a>, uma imagem ou arquivos nos formatos: DOC, PDF, XLS, PPT, MDB, VSD, ZIP, ACCDB, XLSX, DOCX, TXT, JPG, JPEG, GIF, PNG, BMP, HTM, HTML, DWG e PPTX.<\/label><br />';i+='<div class="postit-modal-content-action">';i+='<img data-rule="text" src="'+n+'postit-modal-text-on.png" class="postit-modal-action-text modal-action-img-selected cp" alt="Texto" />';i+='<img data-rule="file" src="'+n+'postit-modal-file.png" class="postit-modal-action-file cp" alt="Arquivo" />';i+="<\/div>";i+='<div class="postit-modal-content-text">';i+='<textarea id="txtdeItem" rows="6"><\/textarea>';i+='<span id="vamdeItem" class="validate-field dn">O que você gostaria de descrever para o item?<\/span>';i+="<br />";i+="<br />";i+='Tags: <span class="total-characters">0 caracteres<\/span>';i+="<br />";i+='<textarea id="txtdeTag" rows="2" maxlength="300"><\/textarea>';i+='<span id="vamdeTag" class="validate-field dn">Você ultrapassou o limite de 300 caracteres.<\/span>';i+='<span id="vamedurlarquivo" class="validate-field dn">Suporte somente para os arquivos com a extensão: doc, pdf, xls, ppt, mdb, vsd, zip, accdb, xlsx, docx, txt, jpg, jpeg, gif, png, bmp, htm, html, dwg e pptx.<\/span>';i+="<\/div>";i+="<\/div>";u=$(i);u.find("#txtdeItem").bind("keyup",function(){$(this).prev().prev().html($(this).val().length.toString()+" caracteres")});u.find("#txtdeTag").bind("keyup",function(){$(this).prev().prev().html($(this).val().length.toString()+" caracteres")});modal.show({width:"600px",caption:"Incluir Item",content:u,confirmButtonText:"Incluir",disableMaskClick:!0,loaded:function(){u.find("#txtdeItem").select();et(u,s)},confirmButtonClick:function(){$("#vamdeItem").hide();var o=u.find("img.modal-action-img-selected"),n=u.find("#txtdeItem").val(),i=u.find("#txtdeTag").val(),f;if(o.data().rule=="text"){if($.trim(n).length==0){$("#vamdeItem").show();u.find("#txtdeItem").focus();return}if($.trim(i).length>300){$("#vamdeTag").show();u.find("#txtdeTag").select();return}r();f={idPostit:s.data().args,deItem:n,deTag:i};$.ajax({type:"POST",url:"/mural/addpostititem.ashx",dataType:"json",data:f,cache:!1,success:function(n){n.status==g.JSONSTATUS_SUCCESS?(e(s,n.response,!0),t(),modal.hide()):n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}})}},cancelButtonClick:function(){f!=undefined&&f.destroy();modal.hide()}})}),o(p,'Inclua textos, links, vídeos do <a class="link" target="_blank" href="http://www.youtube.com">Youtube<\/a><br /> e arquivos'),i!=c.idUsuario&c.icRestrito&&(nt=s.find(".postit-item-action img[data-rule=lock]"),u(nt)),i==c.idUsuario){var tt=s.find(".postit-item-action img[data-rule=color]"),k=s.find(".postit-item-action img[data-rule=edit]"),l=s.find(".postit-item-action img[data-rule=expires]"),d=s.find(".postit-item-action img[data-rule=share]"),a=s.find(".postit-item-action img[data-rule=delete]");u(tt);u(k);u(l);u(d);u(a);k.bind("click",function(){var idPostit=s.data().args,deTitulo=s.attr("text"),icPublico=s.attr("public"),icRestrito=s.attr("restrict"),$content=$(b()),$txtdeTitulo=$content.find("#txtdeTitulo");$txtdeTitulo.val(deTitulo);$content.find("#ckbicPublico")[0].checked=eval(icPublico);$content.find("#ckbicRestrito")[0].checked=eval(icRestrito);modal.show({width:"500px",caption:"Edição do Item do Mural",content:$content,loaded:function(){$txtdeTitulo.select()},confirmButtonText:"Confirmo",confirmButtonClick:function(){if(r(),deTitulo=$content.find("#txtdeTitulo").val(),icPublico=$content.find("#ckbicPublico")[0].checked,icRestrito=$content.find("#ckbicRestrito")[0].checked,$("#vamdeTitulo").hide(),g.isEmpty(deTitulo)){$("#vamdeTitulo",$content).show();t();return}var n={idPostit:idPostit,deTitulo:deTitulo,icPublico:icPublico,icRestrito:icRestrito};$.ajax({type:"POST",url:"/mural/updatepostit.ashx",data:n,dataType:"json",success:function(n){t();n.status==g.JSONSTATUS_SUCCESS?(s.attr("text",deTitulo),s.find(".postit-item-title").html(w(deTitulo)),s.attr("public",icPublico),s.attr("restrict",icRestrito),modal.hide()):n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()},error:function(){g.showError()}})},cancelButtonClick:function(){t();modal.hide()}})});l.bind("click",function(){var i=$(this),u=$(this).data().args,f=$(this).parent().parent().data().args,n=$('<div class="postit-modal-content">A data de expiração é usada para compartilhar os itens do mural com os colegas/alunos. Uma vez que a data expire o item do mural não será mais mostrado no item do mural do colega/aluno. Utilize o calendário abaixo para informar a data de expiração do item do mural.<br /><br /><center><div id="dtExpiracao"><\/div><\/center><\/div>');modal.show({width:"500px",caption:"Data de Expiração do Item do Mural",content:n,confirmButtonText:"Confirmo",confirmButtonClick:function(){r();var n={idPostit:f,dtExpiracao:$("#dtExpiracao").datepicker({dateFormat:"dd-mm-yy"}).val()};$.ajax({type:"POST",url:"/mural/updatepostitexpires.ashx",data:n,dataType:"json",success:function(n){t();n.status==g.JSONSTATUS_SUCCESS?(i.data("args",n.response.dtExpiracao),modal.hide()):n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}})},loaded:function(){n.find("#dtExpiracao").datepicker({inline:!0});n.find("#dtExpiracao").datepicker("setDate",u)},cancelButtonClick:function(){t();modal.hide()}})});d.bind("click",function(){var n=$(this),t=s.data().args,r=n.data().args;modalTurma.init({idUsuario:i,caption:"Clique nos professores ou alunos com quem deseja compartilhar o item do mural",enableScroll:!0,urlTurmas:"/mural/getturmalist.ashx",urlAlunos:"/mural/getalunolistbyturma.ashx",confirmButtonText:"Compartilhar",enable:!1,checkUsers:r,show:!0,confirmButtonClick:function(){var r={idTurma:t,arUsuario:modalTurma.getSelectedUsersString()},i=modal.getConfirmButton();i.attr("disabled","disabled");i.val("Compartilhando...");$.ajax({type:"POST",url:"/mural/sharepostit.ashx",data:r,cache:!1,dataType:"json",success:function(t){t.status==g.JSONSTATUS_SUCCESS?(n.data("args",t.response.arUsuario),h(t.response.arUsuario)?l.removeClass("dn"):l.addClass("dn"),i.removeAttr("disabled"),i.val("Compartilhar"),modal.hide()):t.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}})}})});a.bind("click",function(){var n=$(this).parent().parent(),i=n.data().args,u=n.parent();modal.show({width:"500px",caption:"Confirmação de Exclusão",content:"Tem certeza que deseja excluir o item do mural: <strong>"+s.find(".postit-item-title").html()+"<\/strong>?",confirmButtonText:"Confirmo",confirmButtonClick:function(){r();var f={idPostit:i};$.ajax({type:"POST",url:"/mural/deletepostit.ashx",data:f,dataType:"json",success:function(data){t();eval(data)!=null?(u.isotope("remove",n),a.parent().parent().remove(),tags.reLoad(),modal.hide()):y()}})}})});ut(tt);o(k,"Altere as configurações do Item do Mural");o(l,"Altere a data de expiração do Item do Mural,<br />uma vez que esteja compartilhado");ft(d);o(a,"Exclui o Item do Mural")}else v=s.find(".postit-item-action img[data-rule=delete-share]"),u(v),v.bind("click",function(){var n=$(this).parent().parent(),i=n.data().args,u=n.parent(),f=s.attr("text");modal.show({width:"500px",caption:"Confirmação de Exclusão",content:"Tem certeza que deseja excluir o item do mural compartilhado: <b>"+f+"<\/b>?",confirmButtonText:"Confirmo",confirmButtonClick:function(){r();var f={idPostit:i};$.ajax({type:"POST",url:"/mural/deletesharepostit.ashx",data:f,dataType:"json",success:function(data){t();eval(data)!=null?(u.isotope("remove",n),v.parent().parent().remove(),tags.reLoad(),modal.hide()):y()}})},cancelButtonClick:function(){modal.hide()}})})}function u(n){var t=n.attr("src");n.bind("mouseover",function(){this.src=t.replace(".png","-on.png")}).bind("mouseout",function(){this.src=t.replace("-on.png",".png")})}function h(n){return n==undefined||$.trim(n).length==0?!1:(n=n.split(","),n.length==1&&n[0]!=""||n.length>1)}function o(n,t){n.poshytip({className:"tip-info",showTimeout:1,alignTo:"target",alignX:"center",offsetY:5,allowTipHover:!0,fade:!1,slide:!1,content:function(){return t}})}function ut(n){var t=n.parent().parent(),i=t.data().args;n.poshytip({className:"tip-info",showTimeout:1,alignTo:"target",alignX:"center",offsetY:5,allowTipHover:!0,fade:!1,slide:!1,content:function(){var n='<div class="postit-color">',r;n+='<div class="postit-color1"><\/div>';n+='<div class="postit-color2"><\/div>';n+='<div class="postit-color3"><\/div>';n+='<div class="postit-color4"><\/div>';n+='<div class="postit-color5"><\/div>';n+="<\/div>";r=$(n);r.find("div").on("click",function(){var u=$(this),r=u.prop("class"),n;$.ajax({type:"POST",url:"/mural/changecolor.ashx",dataType:"json",data:{idPostit:i,deCor:r},cache:!1,success:function(i){var u,f;if(i.status==g.JSONSTATUS_SUCCESS){for(u=t.find(".postit-item-title"),f=1;f<=5;f++)n="postit-color"+f,u.hasClass(n)&&(u.removeClass(n),t.removeClass("filter-"+n));u.addClass(r);t.addClass("filter-"+r)}else i.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}})});return r}})}function ft(n){n.poshytip({className:"tip-info",showTimeout:1,alignTo:"target",alignX:"center",offsetY:5,allowTipHover:!0,fade:!1,slide:!1,content:function(){var r=$(this),n=r.data().args.toString(),t="",i;return h(n)?(n=n.split(","),i="width:auto",n.length>=11&&(i="width:360px"),t+='<div class="tooltip-user-list" style="'+i+'">',t+="Compartilhado para "+n.length+" usuários<br />",$.each(n,function(n,i){t+='<img src="http://servicos.uniceub.br/api/coorporativo/foto/?idUsuario='+$.trim(i)+'&idOperacao=1" class="foto medium" />'}),t+="<\/div>"):t="Compartilhar Item do Mural",t}})}function et(i,u){var o=modal.getConfirmButton();i.find("img.postit-modal-action-text").bind("click",function(){f!=undefined&&f.destroy();$(this).next().attr("src",n+"postit-modal-file.png");$(this).attr("src",n+"postit-modal-text-on.png");$(this).next().removeClass("modal-action-img-selected");$(this).addClass("modal-action-img-selected");o.html("Incluir")});i.find("img.postit-modal-action-file").bind("click",function(){$("#vamdeItem").hide();$(this).prev().attr("src",n+"postit-modal-text.png");$(this).attr("src",n+"postit-modal-file-on.png");$(this).prev().removeClass("modal-action-img-selected");$(this).addClass("modal-action-img-selected");o.html("Selecionar Arquivo");var c=i.find("#txtdeItem").val(),l=i.find("#txtdeTag").val(),v=u.data().args,h={idPostit:v,deItem:c,deTag:l};f=new AjaxUpload(o,{action:"/mural/uploadfile.ashx",name:"uploadfile",data:h,responseType:"json",onSubmit:function(n,t){if($("#vamedurlarquivo").hide(),!(t&&a.test(t)))return $("#vamedurlarquivo").show(),!1;h.deItem=i.find("#txtdeItem").val();h.deTag=i.find("#txtdeTag").val();r()},onComplete:function(n,i){try{i=g.parseJSON(i)}catch(r){if($.browser.msie==!0&&parseInt($.browser.version)<=7){g.showError('Este erro ocorreu devido a versão do Internet Explorer 7.0, ou inferior. Favor verificar a versão do seu navegador ou clique <a target="_blank" href="http://windows.microsoft.com/pt-BR/internet-explorer/downloads/ie">aqui<\/a> para atualizá-lo para uma versão mais recente.');return}if($.browser.mozilla==!0&&parseInt($.browser.version)<=9){g.showError('Este erro ocorreu devido a versão do Firefox Mozilla 9.0, ou inferior.0. Favor verificar a versão do seu navegador ou clique <a target="_blank" href="http://br.mozdev.org/">aqui<\/a> para atualizá-lo para uma versão mais recente.');return}g.showError();return}f.destroy();t();i.status==g.JSONSTATUS_SUCCESS?(e(u,i.response,!0),s(),modal.hide()):i.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}});$("#txtdeItem",i).focus()})}function ot(n){n.bind("mouseover",function(){$(this).addClass("postit-item-virtual-hover");$(this).removeClass("postit-item-virtual")}).bind("mouseout",function(){$(this).addClass("postit-item-virtual");$(this).removeClass("postit-item-virtual-hover")}).bind("click",function(){var u=$(this),i=$(b()),f=i.find("#txtdeTitulo");modal.show({width:"500px",caption:"Incluir Item do Mural",content:i,confirmButtonText:"Incluir",loaded:function(){f.focus()},confirmButtonClick:function(e){var s;$("#vamdeTitulo").hide();e.preventDefault();var h=u.attr("index"),o=$.trim(f.val()),a=i.find("#ckbicPublico")[0].checked,v=i.find("#ckbicRestrito")[0].checked,y=parseInt(n.attr("index"))+1;if(g.isEmpty(o)){$("#vamdeTitulo").show();return}s={deTitulo:o,nuOrdem:y,icPublico:a,icRestrito:v};r();$.ajax({type:"POST",url:"/mural/addpostit.ashx",dataType:"json",data:s,cache:!1,success:function(n){t();n.status==g.JSONSTATUS_SUCCESS?(p(u,n.response),l(c(h)),st(i),modal.hide()):n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():g.showError()}})},cancelButtonClick:function(){modal.hide()}})})}function y(){modal.show({caption:"Erro",content:"Ocorreu um erro. Estamos trabalhando para solucionar o mais rápido possível",cancelButtonText:"Ok",cancelButtonClick:function(){modal.hide()}})}function st(n){n.find("#txtdeTitulo").val("")}function p(t,r){var f,e,u,o,s;ht(t);t.removeClass("postit-item-virtual-hover");t.removeClass("postit-item-virtual");t.data("args",r.idPostit);t.attr("public",r.icPublico);t.attr("restrict",r.icRestrito);t.attr("text",r.deTitulo);t.addClass("filter-"+(g.isEmpty(r.deCor)?"postit-color1":r.deCor));f=!1;i!=r.idUsuario&&(e=$('<img class="postit-share-user foto large" src="http://servicos.uniceub.br/api/coorporativo/foto/?idUsuario='+r.idUsuario+'&idOperacao=1" alt="'+r.nmPessoa+'" />'),t.append(e),f=!0);u='<div class="'+(f?"postit-item-title-share":"postit-item-title")+" "+(g.isEmpty(r.deCor)?"postit-color1":r.deCor)+'">';u+=w(r.deTitulo);f&&(u+="<br />",u+="<span>"+g.validateName(r.nmPessoa)+"<\/span>",u+="<br />",u+='<span class="expires">Expira em '+r.dtExpiracao+"<\/span>");u+="<\/div>";u+='<div class="'+(f?"postit-item-list-share":"postit-item-list")+' scrollbar simple" data-rule="item-list" data-args="'+r.idPostit+'"><\/div>';u+='<div class="postit-item-action">';i!=r.idUsuario&r.icRestrito&&(u+='<img data-rule="locked" class="cp" src="'+n+'ico-postit-lock.png" alt="Postit restrito" />');u+='<img data-rule="additem" class="cp" src="'+n+'ico-postit-additem.png" alt="Incluir item" />';i==r.idUsuario?(u+='<img data-rule="color" class="cp" src="'+n+'ico-postit-color.png" title="" alt="Cor" />',u+='<img data-rule="edit" class="cp" src="'+n+'ico-postit-edit.png" title="" alt="Editar" />',u+='<img data-rule="expires" class="cp'+(h(r.arUsuario)?"":" dn")+'" src="'+n+'ico-postit-expires.png" title="" data-args="'+r.dtExpiracao+'" alt="Data de expiração" />',u+='<img data-rule="share" class="cp" src="'+n+'ico-postit-share.png" title="" alt="Compartilhar" data-args="'+r.arUsuario+'" />',u+='<img data-rule="delete" class="cp" src="'+n+'ico-postit-delete.png" title="" alt="Excluir" />'):u+='<img data-rule="delete-share" class="cp" src="'+n+'ico-postit-delete.png" title="" alt="Excluir compartilhamento" />';u+="<\/div>";o=$(u);t.append(o);s=$('<img data-rule="shadow" class="postit-shadow" src="'+n+'postit-shadow.png" alt="" />');t.append(s);rt(t,r)}function w(n){return n.length>35?n.substr(0,34)+"...":n}function ht(n){n.unbind("mouseover");n.unbind("mouseout");n.unbind("click")}function b(){var n='<div class="postit-modal-content">';return n+="Informe um título para o item do mural<br />",n+='<input id="txtdeTitulo" type="text" name="txtdeTitulo" maxlength="50" class="textbox">',n+='<span id="vamdeTitulo" class="validate-field dn">Qual o título do item do mural?<\/span>',n+="<br />",n+="<br />",n+='<input id="ckbicPublico" type="checkbox" name="ckbicPublico"><label for="ckbicPublico">Público<\/label>',n+="<br />",n+='<label class="postit-modal-content-tip" for="ckbicPublico">Ao marcar como público, o item do mural poderá ser visualizado por todos os colegas/alunos. Se o item do mural for compartilhado com algum colega/aluno, este poderá incluir itens no seu item do mural.<\/label>',n+="<br />",n+="<br />",n+='<input id="ckbicRestrito" type="checkbox" name="ckbicRestrito"><label for="ckbicRestrito">Restrito<\/label>',n+="<br />",n+='<label class="postit-modal-content-tip" for="ckbicRestrito">Ao marcar como restrito, os itens do item do mural poderão ser visualizados apenas pelo seu dono e/ou por colegas/aluno com os quais foram compartilhados. Porém colegas não poderão visualizar os itens de outros colegas.<\/label>',n+"<\/div>"}function c(t){var i="",r;return i+='<div class="postit-item postit-item-virtual" data-rule="item" index="'+t+'">',i+='<img data-rule="loader" src="'+n+'loading.gif" class="loader dn" alt="Carregando..." />',i+="<\/div>",r=$(i),ot(r),r}function l(n){$("#postit-list").append(n).isotope("insert",n)}function k(n){var i={},t=undefined;return n.html!=undefined&&(t=n.html),n.videoOptions!=undefined&&(i=n.videoOptions),t=Encoder.htmlDecode(t),t=Encoder.htmlEncode(t),t=g.findUrl({text:t,videoOptions:i}),g.decodeTag(t)}var i,n="/content/images/",f,a=/^(doc|pdf|xls|ppt|mdb|vsd|zip|accdb|xlsx|docx|txt|jpg|jpeg|gif|png|bmp|htm|html|dwg|pptx)$/,d=function(n){i=n;$("#postit-list").isotope({animationEngine:"jquery",itemClass:"postit-item",layoutMode:"masonry",animationOptions:{duration:750,easing:"linear",queue:!1}});v()},v=function(){$.ajax({type:"GET",url:"/mural/getpostitlist.ashx",dataType:"json",cache:!1,success:function(n){var i,t;if(n.status==g.JSONSTATUS_SUCCESS)if(n.response!=null){for(i=0,i=n.response.length+1,t=1;t<=i;t++)l(c(t));n.response.length>0&&$.each(n.response,function(n,t){it(n+1,t)})}else l(c(0));else n.status==g.JSONSTATUS_SESSIONEXPIRED?g.showSessionExpired():n.status=="error"&&g.showError()},error:function(){g.showError()}})};return{init:d,load:v}}(),tags=function(){function f(){var i=library.loopIncrement(t,"",function(n){return'<a href="#" class="filter" title="'+n+'">#'+n+"<\/a>"}),r=$(i);n.empty();h(n.append(r));$("#btnShowTags").show()}function e(){n.empty();n.append('<a href="#" class="filter-empty" title="Não há tags cadastradas">Não há tags cadastradas<\/a>');$("#btnShowTags").hide()}function o(n){return library.filter(n.split(" "),[],function(n){return n!=""&&n.toString()!="undefined"})}function s(n,t){return n.toLowerCase()==t.toLowerCase()}function h(n){n.find("a.filter").on("click",function(){i(this)})}var n,t=[],i=[],u=function(t){if(t.target==undefined)throw"Not defined target";if(t.filter==undefined)throw"Not defined filter";typeof t.target=="string"?n=$(t.target):typeof t.target=="object"&&(n=t.target);typeof t.filter=="function"?i=t.filter:typeof t.filter=="object"&&(i=t.filter);r()},r=function(){var i="",r=$("#postit-list .postit-itemlist"),i=library.loopIncrement(r,"",function(n){return" "+$(n).data().tags});if(t=library.removeEquals(o(i),s),n!=undefined){if(t==undefined||t.length==0){e();return}f()}};return{load:u,tags:t,reLoad:r}}();
/*
//# sourceMappingURL=postit.min.js.map
*/