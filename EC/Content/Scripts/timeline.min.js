var timeline=function(){function it(n,t){var i=l[n.toString()+t.toString()];return i==undefined&&(i=l[n.toString()+t.toString()]={pageIndex:0,total:0,totalLoaded:0}),i}function rt(n,t){var i=$('.timeline-year-content[arg="'+n+'"]');$('.timeline-month[arg="'+t+"/"+n+'"]',i).show();$('.timeline-month-content[arg="'+t+"/"+n+'"]',i).show()}function ut(){var i=$(".timeline-year");$.each(i,function(){for(var i=$(this).attr("arg"),u,r=12;r>=1;r--)(n!=i||n==i&t!=r)&&(u=$('.timeline-year-content[arg="'+i+'"]'),$('.timeline-month[arg="'+r+"/"+i+'"]',u).hide(),$('.timeline-month-content[arg="'+r+"/"+i+'"]',u).hide())})}function ft(){var t=$(".timeline-year"),n;$.each(t,function(){n=$(this).attr("arg");for(var t=12;t>=1;t--)d(n,t)})}function et(n,t){var i=$(".timeline-year-content[arg="+n+'] .timeline-month-content[arg="'+t+"/"+n+'"] .timeline-month-column-left');return i.children().length>0}function ot(n,t){var f=$(".timeline-year-content[arg="+t+'] .timeline-month-content[arg="'+n+"/"+t+'"] .timeline-month-column-left'),e=$(".timeline-year-content[arg="+t+'] .timeline-month-content[arg="'+n+"/"+t+'"] .timeline-month-column-right'),i=0,r=f.height(),u=e.height();r>u?i=r:u>r&&(i=u);f.height(i);e.height(i)}function st(n,t){var r=$('.timeline-month-more[arg="'+n+"/"+t+'"]'),u,f;return r.length||(u='<div class="cb"><\/div>',u+='<div class="timeline-month-more" arg="'+n+"/"+t+'"><a>Mais<\/a><\/div>',u+='<div class="timeline-month-column-left"><\/div>',u+='<div class="timeline-month-column-right"><\/div>',r=$(u),f=$(".timeline-year-content[arg="+t+'] .timeline-month-content[arg="'+n+"/"+t+'"]'),r.insertAfter(f),r.bind("click",function(){ct(n,t);i(t,n,!0)})),r}function ht(n,i){var r=$('.timeline-month-empty[arg="'+n+"/"+i+'"]'),u,f;r.length||(u='<div class="cb"><\/div>',u+='<div class="timeline-month-empty" arg="'+n+"/"+i+'">Nenhuma ocorrência encontrada<\/div>',r=$(u),f=$(".timeline-year-content[arg="+i+'] .timeline-month-content[arg="'+t+"/"+i+'"]'),r.insertAfter(f))}function y(n,t){var i=$('.timeline-month-more[arg="'+n+"/"+t+'"]');r=i.children().detach();i.html("");i.append(a)}function ct(n,t){var i=$('.timeline-month-more[arg="'+n+"/"+t+'"]');a=i.children().detach();i.html("");i.append(r);r.show()}function p(n){var u=$(".timeline-year-content[arg="+n+"]"),i=$('.timeline-month[arg="'+t+"/"+n+'"]',u),f=i.find("img").detach();i.html("");i.append(r);r=f}function u(n,i){var u,e;i==undefined&&(i=!0);u=$("#timeline-loader");u.length||(e="/content/images/loading.gif",u=$('<img id="timeline-loader" class="dn" src="'+e+'" alt="Carregando" />'),$("#timeline").prepend("<center />"),$("#timeline").find("center").append(u));var o=$(".timeline-year-content[arg="+n+"]"),f=$('.timeline-month[arg="'+t+"/"+n+'"]',o),s=$('.timeline-month-content[arg="'+t+"/"+n+'"]',o);f.show();s.show();r=f.children().detach();f.html("");f.append(u);u.show();i&&f.animatefocus()}function w(n){var o="",t,f,i,r,u;n.coTipo=="T"&&(o=" timeline-item-twitter");t='<div class="timeline-item'+o+'">';t+='<img class="tn-set" alt="" />';t+='<div class="timeline-item-header">';t+=n.coTipo!="T"?'<img src="http://servicos.uniceub.br/api/coorporativo/foto/?idUsuario='+n.idUsuario+'&idOperacao=1" alt="'+n.nmPessoa+'" />':'<img src="/Content/Images/ico-twitter.png" alt="@UniCEUB_Oficial" />';f="";n.coTipo=="M"|n.coTipo=="A"|n.coTipo=="C"|n.coTipo=="N"|n.coTipo=="P"&&(f=n.idUsuario==-1?"UniCEUB":g.validateName(n.nmPessoa),t+='<div class="timeline-item-header-name">'+f+"<\/div>",t+="<br />");i="";switch(n.coTipo){case"M":h?r="#":(r="/comunicacao/mensagem",e==n.idUsuario&&(r="/comunicacao/mensagens/enviadas"),r="javascript:g.redirect('"+r+"/"+n.idTimeline+"')");i='<a id="mensagem-'+n.idTimeline+'" href="'+r+'" class="link">Ler mensagem<\/a>';vt(n.idTimeline,n.idUsuario);break;case"A":i='<img alt="Baixar Arquivo" src="/Content/Images/link.png"/> <a id="arquivo-'+n.idTimeline+'" class="link">Baixar arquivo<\/a>';yt(n.idTimeline);break;case"N":i="<a href=\"javascript:timeline.showNoticia('"+n.idTimeline+'\');" class="link">Ler notícia<\/a>';break;case"C":i='<a id="evento-'+n.idTimeline+'" class="link">Ir para o evento<\/a>';wt(n.idTimeline);break;case"P":n.deTitulo="Mural - "+n.deTitulo;i=""}return t+='<div class="timeline-item-header-discipline">'+n.deTitulo+"<\/div>",t+="<\/div>",t+='<div class="timeline-item-text">'+ti({html:n.deTimeline})+"<\/div>",i.length>0&&(t+='<div class="timeline-item-action">  '+i+"<\/div>"),n.coTipo=="N"&&(t+='<div class="timeline-item-social">',t+=b(n,!0),t+="<\/div>"),t+='<div class="timeline-item-elapsetime">Em '+n.dtTimeline.replace(" "," às ")+"<\/div>",t+="<\/div>",u=$(t),k($(".timeline-item-social-facebook",u)),k($(".timeline-item-social-twitter",u)),u}function at(n){var t='<div class="timeline-noticia-text">',i;return t+='<div class="timeline-noticia-social">',t+=b(n),t+="<\/div>",$.trim(n.nmAuto).length>0&&(t+="Por "+n.nmAutor,t+="<br />"),t+=$.trim(n.deFonte).length>0?"Fonte: "+n.dtPublicacao.split(" ")[0]+" - "+n.deFonte:"Fonte: "+n.dtPublicacao.split(" ")[0],t+="<br /><br />",t+=Encoder.htmlDecode(Encoder.htmlDecode(n.deConteudo)),$.trim(n.edURL).length>0&&(t+="<br /><br />",t+='<a href="'+n.edURL+'" target="_blank">Veja Mais<\/a>'),t+="<br /><br />",t+="<\/div>",t+='<div class="timeline-noticia-images"><\/div>',i=$(t),pt(i,n.idDetalhamentoPublicacao),i}function b(n,t){var r=Encoder.urlEncode(n.deTitulo),u=Encoder.urlEncode("https://www.espacoaluno.uniceub.br/informacoes/informativos/noticias/noticiapublica.aspx?"+n.idTimeline),f="http://www.facebook.com/share.php?t="+r+"&u="+u,e="http://twitter.com/share/?url="+u+"&text="+r,i="";return i+='<a title="Compartilhar no Facebook" class="ultimo" href="'+f+'" target="_blank">',i+='<img class="timeline-item-social-facebook" alt="Compartilhar no Facebook" src="/Content/Images/ico-facebook'+(t===!0?"-min":"")+'.gif" complete="complete" />',i+="<\/a>",i+='<a title="Compartilhar no Twitter" class="ultimo" href="'+e+'" target="_blank">',i+='<img class="timeline-item-social-twitter" alt="Compartilhar no Twitter" src="/Content/Images/ico-twitter'+(t===!0?"-min":"")+'.gif" complete="complete" />',i+"<\/a>"}function k(n){n.bind("mouseover",function(){var n=$(this).attr("src");$(this).attr("src",n.replace("-min",""))}).bind("mouseout",function(){var n=$(this).attr("src");$(this).attr("src",n.replace(".gif","-min.gif"))})}function vt(n,t){if(h){var i="/comunicacao/mensagens/mensagem.aspx";e==t&&(i="/comunicacao/mensagens/mensagemenviada.aspx");$.ajax({type:"POST",url:"/rede/encrypturlmensagem.ashx?"+n,dataType:"text",data:{idTimeline:n},success:function(t){if(t!=null){var r=$("#mensagem-"+n);r.attr("href","javascript:g.redirect('"+i+t.toString()+"');")}},error:function(){g.showError()}})}}function yt(n){$.ajax({type:"POST",url:"/rede/encrypturlarquivo.ashx?"+n,dataType:"text",data:{idTimeline:n},success:function(t){if(t!=null){var i=$("#arquivo-"+n);i.attr("href","javascript:g.redirect('downloadarquivo.ashx"+t.toString()+"');")}}})}function pt(n,t){var i=$(n[1]),r={idDetalhementoPublicacao:t};$.ajax({type:"POST",url:"timelineimagensnoticia.ashx",data:r,dataType:"json",success:function(n){if(n.status=="success"){var t;$.each(n.response,function(n,r){t=r.nuWidth;r.nuWidth>350&&(t="350");i.append($('<img width="'+t+'px" src="/ImageNotice.ashx?'+r.idImagemPublicacao+'" alt="'+r.deLegenda+'" />'));i.append("<br />");i.append('<span class="timeline-noticia-legenda">'+r.deLegenda+"<\/span>");i.append("<br /><br />")})}else n.status=="sessionexpired"&&g.showSessionExpired()}})}function wt(n){$.ajax({type:"POST",url:"/rede/encrypturlcalendario.ashx?"+n,dataType:"text",data:{idTimeline:n},success:function(t){if(t!=null){var i=$("#evento-"+n);i.attr("href","javascript:g.redirect('/informacoes/informativos/calendario/evento.aspx"+t.toString()+"');")}}})}function bt(n){var t=w(n),r=t.find(".tn-set"),i;return r.attr("src","content/images/tn-set-left.png"),r.addClass("timeline-item-set-left"),i=$(".timeline-year-content[arg="+n.aaAtual+"]").find('.timeline-month-content[arg="'+n.mmAtual+"/"+n.aaAtual+'"]'),$(".timeline-month-column-left",i).css("height","auto"),$(".timeline-month-column-left",i).append(t),t}function kt(n){var t=w(n),r=t.find(".tn-set"),i;return r.attr("src","content/images/tn-set-right.png"),r.addClass("timeline-item-set-right"),i=$(".timeline-year-content[arg="+n.aaAtual+"]").find('.timeline-month-content[arg="'+n.mmAtual+"/"+n.aaAtual+'"]'),$(".timeline-month-column-right",i).css("height","auto"),$(".timeline-month-column-right",i).append(t),t}function dt(){$("#timeline-title").bind("click",function(){f();o();u(s);i(s,c)});$("#timeline-nav-year a").bind("click",function(){n=$(this).text();t=12;f();o();u(n);i(n,t)});$("#timeline-nav-month a").bind("click",function(){t=$(this).attr("arg");f();u(n);$(".timeline-year[arg="+n+"]").animatefocus();i(n,t)});$(".timeline-year a").bind("click",function(){for(var i,t=$(this).attr("arg"),n=12;n>=1;n--)i=$('.timeline-year-content[arg="'+t+'"]'),$('.timeline-month[arg="'+n+"/"+t+'"]',i).show(),$('.timeline-month-content[arg="'+n+"/"+t+'"]',i).show();$(this).parent().animatefocus()});$(".timeline-year a").bind("dblclick",function(){for(var t=$(this).attr("arg"),i,n=12;n>=1;n--)i=$('.timeline-year-content[arg="'+t+'"]'),$('.timeline-month[arg="'+n+"/"+t+'"]',i).hide(),$('.timeline-month-content[arg="'+n+"/"+t+'"]',i).hide()});$(".timeline-month a").bind("click",function(){var r=$(this).parent().attr("arg"),e=r.split("/")[0],s=r.split("/")[1];n=s;t=e;f();o();u(n);i(n,t)})}function o(){var t=gt(),i=$("#timeline-nav-year a[arg="+n+"]");i.append(t)}function f(){var n=ni(),i=$("#timeline-nav-month a[arg="+t+"]");i.append(n)}function gt(){var n=$("#timeline-nav-year img");return n.show(),n.detach()}function ni(){var n=$("#timeline-nav-month img");return n.show(),n.detach()}function ti(n){var t={},i;return n.videoOptions!=undefined&&(t=n.videoOptions),t.videoWidth=282,t.videoHeight=200,i=g.findUrl({text:n.html,videoOptions:t}),g.decodeTag(i)}function d(n,t){var u=$(".timeline-year-content[arg="+n+"]"),r=$('.timeline-month[arg="'+t+"/"+n+'"]',u),i;return r.length||(i='<div class="cb"><\/div>',i+='<div class="timeline-month" arg="'+t+"/"+n+'"><a>'+ii(t)+"<\/a><br /><span>"+n+"<\/span><\/div>",i+='<div class="timeline-month-content" arg="'+t+"/"+n+'">',i+='    <div class="timeline-month-column-left"><\/div>',i+='    <div class="timeline-month-column-right"><\/div>',i+="<\/div>",i+='<div class="cb"><\/div>',r=$(i),u.append(r)),r}function ii(n){switch(n.toString()){case"1":return"Janeiro";case"2":return"Fevereiro";case"3":return"Março";case"4":return"Abril";case"5":return"Maio";case"6":return"Junho";case"7":return"Julho";case"8":return"Agosto";case"9":return"Setembro";case"10":return"Outubro";case"11":return"Novembro";case"12":return"Dezembro"}return""}var nt=10,s,c,n,t,l=[],r,a,e,v=!1,h=!0,tt=function(r,l,a){e=r;s=n=l;c=t=a;ft();h=window.location.toString().indexOf(".aspx")>-1;o(l);f(a);dt();u(l,!1);i(l,a)},i=function(n,t,i){i==undefined&&(i=!1);var u=!1,r=it(n,t),f=st(t,n);Api.get({url:"coorporativo/timeline",data:{idOperacao:1,idUsuario:e,aaAtual:n,mmAtual:t,nuPagina:r.pageIndex,nuRegistros:nt},success:function(e){if(v||(ut(),v=!0),e.status==Api.status.SUCCESS){if(e.data.length>0){r.pageIndex++;r.total==0&e.data.length>0&&(f.show(),r.total=e.total);r.totalLoaded+=e.data.length;r.totalLoaded>=r.total&&(u=!0,f.hide());var o="L";d(n,t);$(e.data).each(function(r,u){o=="L"?(bt(u),o="R"):(kt(u),o="L");r>=e.data.length-1&&(i?y(t,n):p(n),ot(t,n))})}else r.pageIndex==0&&$("#timeline-loader").hide(),u=!0,i?y(t,n):p(n),et(n,t)||ht(t,n);t>1&t<12&&u&&rt(n,t-1)}}})},lt=function(n){var t={idPublicacao:n};$.ajax({type:"POST",url:"timelinenoticia.ashx",data:t,dataType:"json",success:function(n){if(n.status=="success"){var t=$('<div id="timeline-noticia"><\/div>');t.empty();t.append(at(n.response));modal.show({width:"550px",caption:n.response.deTitulo,content:t,enableScroll:!1,cancelButtonText:"Fechar"})}else n.status=="success"&&g.showSessionExpired()}})};return{init:tt,showNoticia:lt,load:i}}();
/*
//# sourceMappingURL=timeline.min.js.map
*/